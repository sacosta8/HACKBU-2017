<!DOCTYPE html>
<html>
  <head>
    <title> WEBSITE NAME </title>
    <script src="static/javascript/kairos.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.7/p5.js"></script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <!-- Bootstrap -->

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <title>Are You A Hacker?</title>


  </head>
  <body>

  <div class="container">



        <h1> HELLO </h1>
        <p1> you like jazz? </p1>
        <p id="attributes"></p>
        <video id="video" width="640" height="480" autoplay></video>
        <button id="snap">Snap Photo</button>
        <canvas id="canvas" width="640" height="480"></canvas>
        <div id=percentHispanic>ayy</div>
        <div id=percentBlack>ayy2</div>
        <div id=percentAsian>ayy3</div>
        <div id=percentWhite>ayy4</div>
        <div id="hacker" class="row"></div>
</div>



  </body>


  <script>
    var kairos = new Kairos("cd7690fd","32df39bf4f4e7d9882a9e6e9154ceaca");

      var canvas = document.getElementById('canvas');
      var context = canvas.getContext('2d');
      var video = document.getElementById('video');

      // Get access to the camera!
      if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
          navigator.mediaDevices.getUserMedia({ video: true }).then(function(stream) {
              video.src = window.URL.createObjectURL(stream);
              video.play();

          });
      }
      // Trigger photo take
      document.getElementById("snap").addEventListener("click", function() {
      console.log(context);
      context.drawImage(video, 0, 0, 640, 480);
      var image = canvas.toDataURL();
      //console.log(image);
      var options = { "selector" : "FULL"};
      kairos.detect(image, myDetectCallback, options);
      console.log(typeof image);


      });




      //console.log(kairos);
      // (1) set up your callback method
      function myDetectCallback(response)
      {
        console.log(typeof response)
        var obj = JSON.parse(response.responseText);

        //var json_data = JSON.stringify(response);
        //document.getElementById("percentHispanic").innerHTML = "hispanic: " + JSON.stringify(obj["images"][0]["faces"][0]["attributes"]["hispanic"]*100);
        //document.getElementById("percentBlack").innerHTML = "black: " + JSON.stringify(obj["images"][0]["faces"][0]["attributes"]["black"]*100);
        //document.getElementById("percentAsian").innerHTML = "asian: " + JSON.stringify(obj["images"][0]["faces"][0]["attributes"]["asian"]*100);
        //document.getElementById("percentWhite").innerHTML = "white: " + JSON.stringify(obj["images"][0]["faces"][0]["attributes"]["white"]*100);
        //console.log(Object.keys(obj["images"][0]["faces"][0]["attributes"]));


        //document.getElementById("percent").innerHTML = JSON.stringify(obj["images"][0]["face"]);


      }
      $.getJSON("static/hackers5.json", function(json) {
          //var obj = JSON.stringify(json);
          jsonDataMAIN = JSON.stringify(json["hackers"]);
          jsonDataMAIN = JSON.parse(jsonDataMAIN)
          jsonData = JSON.parse(JSON.stringify(Object.keys(json["hackers"]))); // this will show the info it in firebug console
          console.log(jsonData);
          console.log(jsonDataMAIN);


          for (var key in jsonData) {
            console.log(jsonData[key]);
            console.log(jsonDataMAIN[jsonData[key]]["pic"]);
            var hacker_picture = document.createElement("img");
            hacker_picture.setAttribute("id",jsonData[key]);

            var description = document.createElement("p1");
            hacker_picture.src = jsonDataMAIN[jsonData[key]]["pic"];
            description.innerHTML = jsonDataMAIN[jsonData[key]]["description"];
            var picture_div = document.createElement("div");
            picture_div.appendChild(hacker_picture);
            //picture_div.setAttribute("class","col-md-6");
            var description_div = document.createElement("div");
            description_div.appendChild(description);
            //description_div.setAttribute("class","col-md-6");

            var holder = document.createElement("div");
            holder.setAttribute("class","col-md-6");

            holder.appendChild(picture_div);
            holder.appendChild(description_div);
            document.getElementById("hacker").appendChild(holder);
            //console.log(document.getElementById("row"));

            //console.log(jsonDataMAIN[jsonData[key]]["description"]);
          }
      }
    );


  </script>

<html>
